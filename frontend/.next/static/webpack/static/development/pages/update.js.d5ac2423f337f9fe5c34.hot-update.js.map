{"version":3,"file":"static/webpack/static\\development\\pages\\update.js.d5ac2423f337f9fe5c34.hot-update.js","sources":["webpack:///./components/UpdateItem.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation, Query } from \"react-apollo\";\r\nimport Form from \"./styles/Form\";\r\nimport formatMoney from \"../lib/formatMoney\";\r\nimport styled from \"styled-components\";\r\nimport gql from \"graphql-tag\";\r\nimport Error from \"./ErrorMessage\";\r\nimport Router from \"next/router\";\r\n\r\nconst SINGLE_ITEM_QUERY = gql`\r\n\tquery SINGLE_ITEM_QUERY($id: ID!) {\r\n\t\titem(where: { id: $id }) {\r\n\t\t\tid\r\n\t\t\ttitle\r\n\t\t\tdescription\r\n\t\t\tprice\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst UPDATE_ITEM_MUTAION = gql`\r\n\tmutation UPDATE_ITEM_MUTAION(\r\n\t\t$title: String!\r\n\t\t$description: String!\r\n\t\t$image: String\r\n\t\t$largeImage: String\r\n\t\t$price: Int!\r\n\t) {\r\n\t\tupdateItem(\r\n\t\t\ttitle: $title\r\n\t\t\tdescription: $description\r\n\t\t\timage: $image\r\n\t\t\tlargeImage: $largeImage\r\n\t\t\tprice: $price\r\n\t\t) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport class UpdateItem extends Component {\r\n\tstate = {};\r\n\r\n\thandleChange = event => {\r\n\t\tconst { name, type, value } = event.target;\r\n\t\tconst val = type === \"number\" ? parseFloat(value) : value;\r\n\t\tthis.setState({\r\n\t\t\t[name]: val\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Query query={SINGLE_ITEM_QUERY} variables={{ id: this.props.id }}>\r\n\t\t\t\t{({ data, loading }) => {\r\n\t\t\t\t\tif (loading) return <p>Loading...</p>;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Mutation mutation={UPDATE_ITEM_MUTAION} variables={this.state}>\r\n\t\t\t\t\t\t\t{(createItem, { loading, error }) => (\r\n\t\t\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\t\t\tonSubmit={async event => {\r\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tconst res = await createItem();\r\n\t\t\t\t\t\t\t\t\t\tRouter.push({\r\n\t\t\t\t\t\t\t\t\t\t\tpathname: \"/item\",\r\n\t\t\t\t\t\t\t\t\t\t\tquery: { id: res.data.createItem.id }\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Error error={error} />\r\n\t\t\t\t\t\t\t\t\t<fieldset disabled={loading} aria-busy={loading}>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"title\">\r\n\t\t\t\t\t\t\t\t\t\t\tTitle\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"price\">\r\n\t\t\t\t\t\t\t\t\t\t\tPrice\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"price\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"price\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.price}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"description\">\r\n\t\t\t\t\t\t\t\t\t\t\tDescription\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"description\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={data.item.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\">Update</button>\r\n\t\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Mutation>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t</Query>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { UPDATE_ITEM_MUTAION };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAWA;AAoBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAGA;AACA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AAWA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAhDA;AAsDA;AAGA;AA3EA;AACA;AADA;AAAA;;;;;A","sourceRoot":""}