{"version":3,"file":"static/webpack/static\\development\\pages\\sell.js.f9f7a77b8e887e094aeb.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport Form from \"./styles/Form\";\r\nimport formatMoney from \"../lib/formatMoney\";\r\nimport styled from \"styled-components\";\r\nimport gql from \"graphql-tag\";\r\nimport Error from \"./ErrorMessage\";\r\nimport Router from \"next/router\";\r\n\r\nconst CREATE_ITEM_MUTAION = gql`\r\n\tmutation CREATE_ITEM_MUTAION(\r\n\t\t$title: String!\r\n\t\t$description: String!\r\n\t\t$image: String\r\n\t\t$largeImage: String\r\n\t\t$price: Int!\r\n\t) {\r\n\t\tcreateItem(\r\n\t\t\ttitle: $title\r\n\t\t\tdescription: $description\r\n\t\t\timage: $image\r\n\t\t\tlargeImage: $largeImage\r\n\t\t\tprice: $price\r\n\t\t) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport class CreateItem extends Component {\r\n\tstate = {\r\n\t\ttitle: \"\",\r\n\t\tdescription: \"\",\r\n\t\timage: \"\",\r\n\t\tlargeImage: \"\",\r\n\t\tprice: 0\r\n\t};\r\n\r\n\thandleChange = event => {\r\n\t\tconst { name, type, value } = event.target;\r\n\t\tconst val = type === \"number\" ? parseFloat(value) : value;\r\n\t\tthis.setState({\r\n\t\t\t[name]: val\r\n\t\t});\r\n\t};\r\n\r\n\tuploadFile = async event => {\r\n\t\tconst files = event.target.files;\r\n\t\tconst data = new FormData();\r\n\t\tdata.append(\"file\", files[0]);\r\n\t\tdata.append(\"upload_preset\", \"sickfits\");\r\n\t\tconst res = await fetch(\r\n\t\t\t\"https://api.cloudinary.com/v1_1/doiqmhyyj/image/upload\",\r\n\t\t\t{\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tbody: data\r\n\t\t\t}\r\n\t\t);\r\n\t\tconst file = await res.json();\r\n\t\tthis.setState({\r\n\t\t\timage: file.secure_url,\r\n\t\t\tlargeImage: file.eager[0].secure_url\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Mutation mutation={CREATE_ITEM_MUTAION} variables={this.state}>\r\n\t\t\t\t{(createItem, { loading, error }) => (\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tonSubmit={async event => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tconst res = await createItem();\r\n\t\t\t\t\t\t\tRouter.push({\r\n\t\t\t\t\t\t\t\tpathname: \"/item\",\r\n\t\t\t\t\t\t\t\tquery: { id: res.data.createItem.id }\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Error error={error} />\r\n\t\t\t\t\t\t<fieldset disabled={loading} aria-busy={loading}>\r\n\t\t\t\t\t\t\t<label htmlFor=\"file\">\r\n\t\t\t\t\t\t\t\tImage\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\tid=\"file\"\r\n\t\t\t\t\t\t\t\t\tname=\"file\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Upload Image\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tonChange={this.uploadFile}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{this.state.image && (\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\twidth=\"200\"\r\n\t\t\t\t\t\t\t\t\t\tsrc={this.state.image}\r\n\t\t\t\t\t\t\t\t\t\talt={this.state.title}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\">\r\n\t\t\t\t\t\t\t\tTitle\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"title\"\r\n\t\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.title}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<label htmlFor=\"price\">\r\n\t\t\t\t\t\t\t\tPrice\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tid=\"price\"\r\n\t\t\t\t\t\t\t\t\tname=\"price\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"price\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.price}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<label htmlFor=\"description\">\r\n\t\t\t\t\t\t\t\tDescription\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"description\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.description}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<button type=\"submit\">Submit</button>\r\n\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)}\r\n\t\t\t</Mutation>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { CREATE_ITEM_MUTAION };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAoBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AALA;AACA;AAFA;AASA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAGA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAQA;AACA;AAFA;AACA;AARA;AAKA;AALA;AAAA;AACA;AADA;AAYA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAlBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAoCA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAlEA;AAwEA;AA/GA;AACA;AADA;AAAA;;;;;A","sourceRoot":""}