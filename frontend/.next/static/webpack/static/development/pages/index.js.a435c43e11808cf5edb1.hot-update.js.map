{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.a435c43e11808cf5edb1.hot-update.js","sources":["webpack:///./components/DeleteItem.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport { ALL_ITEMS_QUERY } from \"./ItemsAll\";\r\n\r\nconst DELETE_ITEM_MUTATION = gql`\r\n\tmutation DELETE_ITEM_MUTATION($id: ID!) {\r\n\t\tdeleteItem(id: $id) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport class DeleteItem extends Component {\r\n\tupdate = (cache, payload) => {\r\n\t\t//Read the cache for the files we want - i.e. all the items like we do in ItemsAll\r\n\t\tconst data = cache.readQuery({ query: ALL_ITEMS_QUERY });\r\n\t\t//Take the deleted item out of page\r\n\t\tdata.items = data.items.filter(\r\n\t\t\titem => item.id != payload.data.deleteItem.id\r\n\t\t);\r\n\t\tcache.writeQuery({ query: ALL_ITEMS_QUERY, data: data });\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Mutation\r\n\t\t\t\tmutation={DELETE_ITEM_MUTATION}\r\n\t\t\t\tvariables={{ id: this.props.id }}\r\n\t\t\t\tupdate={this.update}\r\n\t\t\t>\r\n\t\t\t\t{(deleteItem, { loading, error }) => {\r\n\t\t\t\t\tif (loading) return <p>Loading....</p>;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tif (confirm(\"Are you sure?\")) {\r\n\t\t\t\t\t\t\t\t\tdeleteItem();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t</Mutation>\r\n\t\t);\r\n\t}\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAQA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AAYA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAGA;AAlCA;AACA;AADA;AAAA;;;;A","sourceRoot":""}